
题解

对于 $n\le k$ 的情况，只有最后一个人会留下来。

考虑用离开的人的编号序列描述所有人回归的过程，例如 $n=4,k=2$ 时离开序列 $2,1,4,3$ 是合法的。

假设回归序列的下标从 $1$ 开始，那么考虑按照人的编号从小到大插入回归序列中，第一个回归的人为 $p$；

对于 $1\le i<p$ 的人，第 $i$ 个人插入之后在回归序列中的位置 $\bmod k=1$，方案数为 $\prod\lceil\frac i k\rceil$；

$p$ 号人会固定在第一位；

对于 $p<i\le n$ 的人，第 $i$ 个人插入之后在回归序列中的位置一样要 $\bmod k=1$，但不能是一号位，方案数为 $\prod\lceil\frac i k\rceil-1$。

不考虑 $p$ 为第一个回归的限制时方案数为 $\prod_{i=1}^n\lceil\frac i k\rceil$，所以答案是 $\dfrac{\prod_{i=p+1}^n\lceil\frac i k\rceil-1}{\prod_{i=p}^n\lceil\frac i k\rceil}$。
